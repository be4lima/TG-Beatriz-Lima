[["análise-exploratória-de-dados.html", "Capítulo 2 Análise Exploratória de Dados 2.1 População e amostra 2.2 Sumarização numérica de dados Aplicação", " Capítulo 2 Análise Exploratória de Dados A Análise Exploratória de Dados (EDA) é uma forma de utilizar ferramentas gráficas e estatísticas apropriadas da linguagem R na exploração de dados. A partir da visualização, transformação e modelagem de dados, essa análise explora os dados de forma sistemática (WICKHMAN &amp; GROLEMUND, 2017). Para aplicar a EDA, de acordo com Wickhman &amp; Grolemund (2017), basta inicialmente gerar questões sobre os dados, utilizar as funcionalidades do R para encontrar respostas e utilizar o que foi aprendido para gerar novas questões. Portanto, essa análise é um ciclo iterativo. 2.1 População e amostra A População é um conjunto de observações relacionadas a indivíduos com uma característica em comum. Já a Amostra é um subconjunto da população, com uma parte das observações relacionadas à população. A partir da amostra realizam-se inferências sobre as características da população. É importante que a amostra seja representativa para que os resultados não sejam deturpados. 2.2 Sumarização numérica de dados Resumos numéricos de dados são fundamentais para realizar inferências estatísticas, porque, de acordo com Montgomery &amp; Runger (2021), permitem ao engenheiro focar nas características importantes dos dados ou ter discernimento acerca do tipo de modelo que deveria ser usado na solução do problema. Por isso, torna-se útil descrever numericamente, a partir de medidas de posição, variabilidade e forma, características dos dados. 2.2.1 Medidas de Posição 2.2.1.1 Média A média é a divisão da soma de todos os valores da série pelo número de obervações n. \\(\\bar{x}=\\frac{x_{1}+x_{2}+x_{3}...x_{n}}{n}=\\frac{\\sum x_n}{n}\\) 2.2.1.2 Mediana Em um conjunto de valores ordenados, a mediana é o valor que ocupa a posição central. Portanto, a mediana divide a distribuição de valores na metade. 2.2.1.3 Moda Em um conjunto de valores, a Moda seria o valor que ocorre com maior frequência. Ou seja, o valor que mais se repete. 2.2.2 Medidas de Variabilidade 2.2.2.1 Amplitude Em um conjunto de observações, a Amplitude é a diferença entre o maior valor e o menor. 2.2.2.2 Variância Para uma amostra de n observações, a Variância será: \\(s=\\frac{\\sum(x_{i}-\\bar{x})^{2}}{n-1}\\) 2.2.2.3 Desvio Médio (Standard Deviation) Para uma amostra de n obervações, o Desvio Padrão (SD) será a raiz quadrada positiva da Variância. 2.2.2.4 Quartis, Decis e Percentis Os Quartis dividem um conjunto de obervações ordenados em 4 partes iguais; os Decis, em 10; e, os Percentis, em 100. 2.2.3 Medidas de Forma As medidas de forma permitem a verificação de como um conjunto de dados está se comportando em sua distribuição. Gráficos de distribuição de frequência e histogramas são ferramentas importantes para essa verificação. 2.2.3.1 Assimetria Distribuições em forma de sino são simétricas, já que a média, mediana e moda desse conjunto de dados são iguais. Ou seja, a metade esquerda do histograma é aproximadamente igual à metade direita. Distribuições assimétricas possuem uma concentração de seus dados, à direita ou à esquerda, no histograma. Ou seja, apresentam uma cauda em uma das extremidades. Se a distribuição desses dados estiverem concentrados à direita, são dados com assimetria positiva. Se concentrados à esquerda, assimetria negativa. 2.2.3.1.1 Coeficiente de Assimetria de Pearson \\(A_s=\\frac{3*(\\bar{x} - Md)}{s}\\) 2.2.3.2 Curtose Curtose indica o grau de achatamento de uma distribuição em relação à curva normal. 2.2.3.2.1 Coeficiente de Curtose \\(C=\\frac{Q_3-Q_1}{2*(P_{90} - P_{10})}\\) A curva normal possui C=0,263. Aplicação 2.2.4 Pacote Climate Para a análise exploratória de dados, serão utilizados os dados do pacote climate, que automatiza o download de dados meteorológicos e hidrológicos de repositórios públicos. Inicialmente, os dados serão carregados e também serão imotidos os valores NA coma função na.omit: library(tidyverse) ## -- Attaching packages --------------------------------------- tidyverse 1.3.1 -- ## v ggplot2 3.3.5 v purrr 0.3.4 ## v tibble 3.1.6 v dplyr 1.0.8 ## v tidyr 1.2.0 v stringr 1.4.0 ## v readr 2.1.2 v forcats 0.5.1 ## Warning: package &#39;dplyr&#39; was built under R version 4.1.3 ## -- Conflicts ------------------------------------------ tidyverse_conflicts() -- ## x dplyr::filter() masks stats::filter() ## x dplyr::lag() masks stats::lag() # Carregar pacote climate library(climate) ## Warning: package &#39;climate&#39; was built under R version 4.1.3 # Carregar dados para análise dados1 &lt;- hydro_imgw_monthly(year=2010, coords= FALSE, col_names = &quot;full&quot;) ## [1] &quot;https://danepubliczne.imgw.pl/data/dane_pomiarowo_obserwacyjne/dane_hydrologiczne/miesieczne/&quot; ## C:\\Users\\LUIZAR~1\\AppData\\Local\\Temp\\RtmpqiOEMg\\file4c50342e1212 ## [1] &quot;https://danepubliczne.imgw.pl/data/dane_pomiarowo_obserwacyjne/dane_hydrologiczne/miesieczne/mies_info.txt&quot; ## C:\\Users\\LUIZAR~1\\AppData\\Local\\Temp\\RtmpqiOEMg\\file4c5061f16c7d ## [1] &quot;https://danepubliczne.imgw.pl/data/dane_pomiarowo_obserwacyjne/dane_hydrologiczne/miesieczne/2010/mies_2010.zip&quot; ## C:\\Users\\LUIZAR~1\\AppData\\Local\\Temp\\RtmpqiOEMg\\file4c50381e7647 dados2 &lt;- na.omit(dados1) Para visualizar a contagem total de valores faltantes (NA) em cada coluna do dataset utilizaremos a função sapply. Por ela, é possível concluir que as colunas com dados faltantes são as de State, Temperature, e Flow. sapply(dados1, function(x) sum(is.na(x))) ## ID Station ## 0 0 ## River_or_Lake Hydrologic year ## 0 0 ## Hydrologic year ID Extreme ID [min - 1, mean - 2, Max - 3] ## 0 0 ## State [cm] Flow [m3_s] ## 293 6101 ## Temperature [C] Month ## 23789 0 Após, é possível visualizar as primeiras seis linhas dos dados com a função head(). A partir disso, seguimos com a função summary que apresenta a sumarização dos dados. Ou seja, calcula, para cada uma das variáveis numéricas, as seguintes informações: valor mínimo (Min) e máximo (Max); o valor do 25º percentil, também conhecido como primeiro quartil (1st Qu); o valor do 75º quartil, também conhecido como terceiro quartil (3rs Qu); e, por fim, a média e a mediana. # Visualizar as seis primeiras linhas do dataset head(dados2) ## ID Station River_or_Lake Hydrologic year Hydrologic year ID ## 11038 154150040 BARDY Parseta (44) 2010 1 ## 11039 154150040 BARDY Parseta (44) 2010 1 ## 11040 154150040 BARDY Parseta (44) 2010 1 ## 11041 154150040 BARDY Parseta (44) 2010 2 ## 11042 154150040 BARDY Parseta (44) 2010 2 ## 11043 154150040 BARDY Parseta (44) 2010 2 ## Extreme ID [min - 1, mean - 2, Max - 3] State [cm] Flow [m3_s] ## 11038 1 237 23.3 ## 11039 2 260 28.4 ## 11040 3 284 33.6 ## 11041 1 249 24.0 ## 11042 2 268 29.4 ## 11043 3 294 36.0 ## Temperature [C] Month ## 11038 3.8 11 ## 11039 6.6 11 ## 11040 7.8 11 ## 11041 0.2 12 ## 11042 3.1 12 ## 11043 6.5 12 view(dados2) # Sumarizando os dados summary(dados2) ## ID Station River_or_Lake Hydrologic year ## Min. :149180100 Length:4831 Length:4831 Min. :2010 ## 1st Qu.:150200080 Class :character Class :character 1st Qu.:2010 ## Median :151210190 Mode :character Mode :character Median :2010 ## Mean :151555380 Mean :2010 ## 3rd Qu.:153140020 3rd Qu.:2010 ## Max. :154210100 Max. :2010 ## Hydrologic year ID Extreme ID [min - 1, mean - 2, Max - 3] State [cm] ## Min. : 1.000 Min. :1 Min. : 13 ## 1st Qu.: 3.000 1st Qu.:1 1st Qu.: 122 ## Median : 6.000 Median :2 Median : 189 ## Mean : 6.395 Mean :2 Mean : 216 ## 3rd Qu.: 9.000 3rd Qu.:3 3rd Qu.: 279 ## Max. :12.000 Max. :3 Max. :1019 ## Flow [m3_s] Temperature [C] Month ## Min. : 0.09 Min. : 0.000 Min. : 1.000 ## 1st Qu.: 6.50 1st Qu.: 3.100 1st Qu.: 4.000 ## Median : 19.30 Median : 8.600 Median : 7.000 ## Mean : 145.69 Mean : 9.394 Mean : 6.626 ## 3rd Qu.: 86.45 3rd Qu.:14.700 3rd Qu.:10.000 ## Max. :6980.00 Max. :27.600 Max. :12.000 Também é possível utilizar a função dim() para visualizar a dimensão do dataset. #Dimensão do dataset dim(dados2) ## [1] 4831 10 Portanto, o dataset possui 4831 linhas e 10 colunas. Após visualizar a sumarização dos dados, podemos seguir para a visualização dos dados. Iremos criar um histograma dos valores de Vazão (m³/s) dos rios (Coluna River_or_Lake) do nosso dataset. #Histograma da vazão ggplot(data=dados2, aes(x=dados2$`Flow [m3_s]`)) + geom_histogram(fill=&quot;blue&quot;, color=&quot;blue&quot;) + ggtitle(&quot;Histograma de Vazão [m³/s]&quot;) ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. É possível visualizar que a grande maioria das vazões estão próximas ou são zero. Também é possível visualizar as vazões em um gráfico de dispersão, pareando qualquer combinação de variáveis: ggplot(data=dados2, aes(x=dados2$River_or_Lake, y=dados2$`Flow [m3_s]`)) + geom_point() + ggtitle(&quot;Distribuição de vazões por rio ou lago&quot;) + theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) Também é possível criar um Boxplot da vazão agrupada pelo rio ou lago correspondente: ggplot(data=dados2, aes(x=dados2$River_or_Lake, y=dados2$`Flow [m3_s]`)) + geom_boxplot(fill=&quot;steelblue&quot;) + theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) Por existirem rios e lagos com vazões muito próximas, alguns boxplots não são visualizados. Porém, nos outros é possível visualizar. 2.2.5 INMET Para a aplicação, será utilizada a base de dados do Instituto Nacional de Meteorologia (INMET) de precipitação e temperatura na estação meterológica do Mirante de Santana em São Paulo, dos anos de 2014 a 2016. No ano de 2014, São Paulo passou pela pior estiagem deste o ano de 1953. Entre o fim de 2014 e o outono de 2016, a cidade registrou o maior El Niño deste 1950. O El Niño, quando ocorre, causa um aquecimento anômalo das águas superficiais e sub-superficiais do Oceano Pacífico Equatorial, porém, não se comporta de forma constante em relação ao volume de chuvas. Uma das dúvidas do período era se o El niño poderia afetar o regime de chuvas e, assim, aumentar a precipitação em São Paulo. Portanto, iremos aplicar a EDA para verificar essa relação entre o El niño e o volume de chuvas. Para importar a base de dados em .csv, utiliza-se a função read.csv() e insere-se como argumento o diretório: met&lt;- read.csv2(&quot;~/UFABC Beatriz/TG Beatriz Lima/Dados/data1.csv&quot;) met1 &lt;- na.omit(met) # Omitindo os valores faltantes do conjunto de dados É importante lembrar que read.csv() é utilizado quando os valores são separados por vírgula e decimais por ponto; e, read.csv2(), quando são separados por ponto e vírgula e os decimais por vírgula. Para visualizar a tabela importada, basta executar a função View(): View(met1) Para iniciar a exploração dos dados, inicialmente será utilizada a função str() que exibe de forma compacta a estrutura da tabela importada. str(met1) ## &#39;data.frame&#39;: 34 obs. of 5 variables: ## $ Data : chr &quot;2014/01/31&quot; &quot;2014/02/28&quot; &quot;2014/03/31&quot; &quot;2014/04/30&quot; ... ## $ NUMDIAS : int 16 14 18 8 6 5 6 12 8 13 ... ## $ PRECIPITACAOTOTAL: num 223 188.8 212.6 77.2 50.2 ... ## $ TEMPERATURAMEDIA : int 25 25 23 21 19 18 18 20 21 21 ... ## $ ANO : int 2014 2014 2014 2014 2014 2014 2014 2014 2014 2014 ... ## - attr(*, &quot;na.action&quot;)= &#39;omit&#39; Named int [1:2] 7 26 ## ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;7&quot; &quot;26&quot; Continuando, será utilizada a função ´summary()´ para apresentar o sumário de estatísticas descritivas (média, mediana, mínimo, máximo, 1º quartil, 3º quartil e valores faltantes (NA)). summary(met1) ## Data NUMDIAS PRECIPITACAOTOTAL TEMPERATURAMEDIA ## Length:34 Min. : 2.00 Min. : 2.40 Min. :15.00 ## Class :character 1st Qu.: 8.00 1st Qu.: 50.35 1st Qu.:18.00 ## Mode :character Median :12.00 Median :105.90 Median :21.00 ## Mean :12.09 Mean :129.05 Mean :20.82 ## 3rd Qu.:16.00 3rd Qu.:201.20 3rd Qu.:23.00 ## Max. :22.00 Max. :327.80 Max. :25.00 ## ANO ## Min. :2014 ## 1st Qu.:2014 ## Median :2015 ## Mean :2015 ## 3rd Qu.:2016 ## Max. :2016 Para continuar explorando os dados, realizou-se um gráfico de linhas a fim de analisar o comportamento da precipitação em relação às datas. year &lt;- met1$Data precip &lt;- met1$PRECIPITACAOTOTAL df &lt;- data.frame(precipitacao=precip, ano=year) library(ggplot2) ggplot(df, aes(x = ano, y = precipitacao)) + geom_line(linetype=&quot;dashed&quot;, color=&quot;blue&quot;, aes(group=1)) + geom_point() A distribuição de frequência da precipitação apresenta assimetria à direita (positiva): ggplot(data = df, aes(x = precip)) + geom_histogram() ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. Após realizar a sumarização numérica de todos os dados, agora será focado nos dados de interesse: precipitação e ano. Primeiramente, será encontrada a média de precipitação por ano analisado, com um intervalo de confiança de 95% (escore-x da curva normal igual a 1,96). #Média das precipitações por ano library(dplyr) #instalando o pacote para utilizar o operador pipe %&gt;% tabela_stats &lt;- met1 %&gt;% group_by(ANO) %&gt;% summarise(n_obs = n(), media = mean(PRECIPITACAOTOTAL), desvio_padrao = sd(PRECIPITACAOTOTAL)) %&gt;% mutate(erro = 1.96*desvio_padrao/sqrt(n_obs), limite_superior = media + erro, limite_inferior = media - erro) Com o objetivo de analisar a graficamente os valores de precipitação por ano, será utilizado um gráfico de barras com os erros padrões das amostras. Utiliza-se o erro padrão e não o desvio padrão porque, neste caso, estamos interessados na variabilidade das médias das amostras e não na variabilidade das observações dentro da amostra. #Visualizando a tabela criada com os dados estatísticos View(tabela_stats) #Plotando os valores com seus respectivos erros ggplot (data = tabela_stats, aes(x=ANO, y = media, fill=ANO)) + geom_col() + geom_errorbar(aes(ymin=limite_inferior, ymax=limite_superior)) + ggtitle(&quot;Média das precipitações por ano&quot;) + xlab(&quot;&quot;) + ylab(&quot;&quot;) + theme_bw() + theme(legend.position = &quot;none&quot;) É possível analisar que houve um aumento do volume de chuvas no ano de 2015, se comparado com o ano de 2014. O valor médio de precipitação de 2016 é ligeiramente maior que a média de 2014. Porém, não é possível afirmar que os valores de precipitação se devem somente ao El niño, porque também existem diversos fatores, não analisados aqui, que podem influenciar no volume de chuvas. "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
